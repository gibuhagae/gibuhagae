<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.gibuhagae.gibuhagae.SettlementManagement.dao.SettlementMapper"><resultMap id="paymentResultMap" type="com.gibuhagae.gibuhagae.SettlementManagement.dto.SettlementDTO">    <result property="paymentCount" column="TOTAL_COUNT"/>    <result property="paymentPrice" column="TOTAL_PRICE"/>    <result property="completeDelivery" column="DELIVERY_COMPLETE_COUNT"/></resultMap>    <resultMap id="CERResultMap" type="com.gibuhagae.gibuhagae.SettlementManagement.dto.CancelAndReturnAndSwapDTO">        <result property="cancelAndReturnCount" column="CANCELANDRETURN_COUNT"/>        <result property="cancelAndReturnPrice" column="CANCELANDRETURN_PRICE"/>        <result property="swapCount" column="SWAP_COUNT"/>    </resultMap>    <resultMap id="searchCERResultMap" type="com.gibuhagae.gibuhagae.SettlementManagement.dto.CancelAndReturnAndSwapDTO">        <result property="searchSwapCount" column="SEARCH_SWAP_COUNT"/>        <result property="searchCancelAndReturnCount" column="SEARCH_CT_COUNT"/>        <result property="searchCancelAndReturnPrice" column="SEARCH_CT_PRICE"/>    </resultMap>    <resultMap id="searchPaymentResultMap" type="com.gibuhagae.gibuhagae.SettlementManagement.dto.SettlementDTO">    <result property="searchTotalPrice" column="SEARCH_TOTAL_PRICE"/>    <result property="searchTotalCount" column="SEARCH_TOTAL_COUNT"/>    <result property="searchDeliveryCount" column="SEARCH_DELIVERY_COMPLETE_COUNT"/>    </resultMap>    <select id="selectTotalSalesList" resultMap="paymentResultMap">        SELECT            TO_CHAR(ORDER_DATE, 'YYYY-MM-DD'),            SUM(PAYMENT_PRICE) AS TOTAL_PRICE,            COUNT(*) AS TOTAL_COUNT,            COUNT(CASE WHEN ORDER_STATUS = '배송완료' THEN 1  END) AS DELIVERY_COMPLETE_COUNT        FROM ORDER_MANAGEMENT        WHERE            (ORDER_STATUS = '신규주문' OR             ORDER_STATUS = '배송준비중' OR             ORDER_STATUS = '배송중' OR             ORDER_STATUS = '배송완료' OR             ORDER_STATUS = '교환')          AND TO_CHAR(ORDER_DATE, 'YYYY-MM-DD') = TO_CHAR(SYSDATE, 'YYYY-MM-DD')        GROUP BY TO_CHAR(ORDER_DATE, 'YYYY-MM-DD')    </select>    <select id="selectCERList" resultMap="CERResultMap">        SELECT            TO_CHAR(ORDER_DATE, 'YYYY-MM-DD'),            SUM(PAYMENT_PRICE) AS CANCELANDRETURN_PRICE,            COUNT(*) AS CANCELANDRETURN_COUNT        FROM ORDER_MANAGEMENT        WHERE (CER_STATUS = '취소' OR               CER_STATUS = '반품')          AND TO_CHAR(ORDER_DATE, 'YYYY-MM-DD') = TO_CHAR(SYSDATE, 'YYYY-MM-DD')        GROUP BY TO_CHAR(ORDER_DATE, 'YYYY-MM-DD')    </select>    <select id="selectSwapList" resultMap="CERResultMap">        SELECT            TO_CHAR(ORDER_DATE, 'YYYY-MM-DD'),            SUM(PAYMENT_PRICE),            COUNT(*) AS SWAP_COUNT        FROM ORDER_MANAGEMENT        WHERE CER_STATUS = '교환'          AND TO_CHAR(ORDER_DATE, 'YYYY-MM-DD') = TO_CHAR(SYSDATE, 'YYYY-MM-DD')        GROUP BY TO_CHAR(ORDER_DATE, 'YYYY-MM-DD')    </select>    <select id="searchDateAndPayment" resultMap="searchPaymentResultMap">        SELECT            TO_CHAR(SYSDATE, 'YYYY-MM-DD') ,            SUM(PAYMENT_PRICE) AS SEARCH_TOTAL_PRICE,            COUNT(*) AS SEARCH_TOTAL_COUNT,            COUNT(CASE WHEN ORDER_STATUS = '배송완료' THEN 1  END) AS SEARCH_DELIVERY_COMPLETE_COUNT        FROM ORDER_MANAGEMENT        WHERE            (ORDER_STATUS = '신규주문' OR             ORDER_STATUS = '배송준비중' OR             ORDER_STATUS = '배송중' OR             ORDER_STATUS = '배송완료' OR             ORDER_STATUS = '교환')          AND TO_CHAR(ORDER_DATE, 'YYYY-MM-DD') BETWEEN #{startDate} AND #{endDate}    </select><select id="searchCancelAndReturn" resultMap="searchCERResultMap">    SELECT        SUM(PAYMENT_PRICE) AS SEARCH_CT_PRICE,        COUNT(*) AS SEARCH_CT_COUNT    FROM ORDER_MANAGEMENT    WHERE        (CER_STATUS = '반품' OR         CER_STATUS = '취소' )      AND TO_CHAR(ORDER_DATE, 'YYYY-MM-DD') BETWEEN #{startDate} AND #{endDate}</select>    <select id="searchSwap" resultMap="searchCERResultMap">        SELECT            COUNT(*) AS SEARCH_SWAP_COUNT        FROM ORDER_MANAGEMENT        WHERE            CER_STATUS = '교환'          AND TO_CHAR(ORDER_DATE, 'YYYY-MM-DD') BETWEEN #{startDate} AND #{endDate}    </select></mapper>